echo ">>> Cleaning up SBT, Heroku, and optional JDK artifacts..."
pwd
echo ">>> BUILD_DIR: $BUILD_DIR"
echo ">>> before cleanup"
ls -lah "$BUILD_DIR"
du -sh "$BUILD_DIR"
# Remove SBT and Ivy caches
rm -rf "$BUILD_DIR/.sbt_home"
rm -rf "$BUILD_DIR/.ivy2"

# Remove Heroku buildpack cache
rm -rf "$BUILD_DIR/.heroku"

# Remove unneeded JDK subdirectories to reduce size, but keep bin/java
rm -rf "$BUILD_DIR/.jdk/demo"
rm -rf "$BUILD_DIR/.jdk/sample"
rm -rf "$BUILD_DIR/.jdk/include"
rm -rf "$BUILD_DIR/.jdk/man"
rm -rf "$BUILD_DIR/.jdk/jmods"
rm -rf "$BUILD_DIR/.jdk/lib/src.zip"
rm -rf "$BUILD_DIR/.jdk/lib/ct.sym"
rm -rf "$BUILD_DIR/.jdk/lib/jrt-fs.jar"
rm -rf "$BUILD_DIR/.jdk/lib/server/classes.jsa"
rm -rf "$BUILD_DIR/.jdk/lib/server/classes_nocoops.jsa"
rm -rf "$BUILD_DIR/.jdk/lib/security/policy"
rm -rf "$BUILD_DIR/.jdk/lib/security/blacklisted.certs"
# If you have your own truststore, you can remove cacerts, but typically you need it
# rm -rf "$BUILD_DIR/.jdk/lib/security/cacerts"

rm -rf "$BUILD_DIR/ui/node_modules"
rm -rf "$BUILD_DIR/target/scala-3.3.4"

echo ">>> after cleanup"
ls -lah "$BUILD_DIR"
du -sh "$BUILD_DIR"

echo ">>> Cleanup complete"